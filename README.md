# Notifications API

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ API –Ω–∞ FastAPI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ –∑–∞—â–∏—Ç—É –º–∞—Ä—à—Ä—É—Ç–æ–≤.

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

1. –°–æ–∑–¥–∞–π `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```bash
cp .env.example .env
```

2. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ Docker Compose:

```bash
docker-compose up --build
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
`http://0.0.0.0:8000/api/`

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
make postgres

make create_db

make run_uvicorn
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
`http://0.0.0.0:8000/api/`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
üëâ [http://0.0.0.0:8000/docs#/](http://0.0.0.0:8000/docs#/)

---

## üîÄ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### `/auth/register` \[POST]

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**Request:**

```json
{
  "username": "yourname",
  "password": "yourpassword"
}
```

**Response:**

```json
{
  "access_token": "...",
  "refresh_token": "...",
  "token_type": "bearer"
}
```

---

### `/auth/login` \[POST]

–í–æ–π—Ç–∏ –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OAuth2-form `username/password`.

---

### `/auth/refresh` \[POST]

–û–±–Ω–æ–≤–∏—Ç—å `access_token` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `refresh_token`.

---

## üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### `/notifications/` \[POST]

–°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (**—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö**).

**Request:**

```json
{
  "type": "like",
  "text": "You got a new like!"
}
```

---

### `/notifications/` \[GET]

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (**—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö**).

**Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `page`: –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (default: 1)
* `per_page`: —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (default: 50)
* `order`: `asc` | `desc`

**Response:**

```json
{
  "total": 122,
  "count": 50,
  "page": 1,
  "pages": 3,
  "items": [
    {
      "id": 1,
      "type": "comment",
      "text": "new reply",
      "created_at": "...",
      "user_id": 5
    }
  ]
}
```

---

### `/notifications/{notification_id}` \[DELETE]

–£–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —é–∑–µ—Ä–∞ (**—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö**).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

* `api/` ‚Äî —Ä–æ—É—Ç—ã
* `services/` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
* `db/` ‚Äî –º–æ–¥–µ–ª–∏ Tortoise ORM
* `rest_models/` ‚Äî —Å—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–∞
* `settings.py` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

## üöö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* **FastAPI** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
* **Tortoise ORM** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è ORM
* **PyJWT** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å JWT
* **Pydantic** ‚Äî —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
* **Docker** + **docker-compose** ‚Äî –¥–µ–ø–ª–æ–π

---
